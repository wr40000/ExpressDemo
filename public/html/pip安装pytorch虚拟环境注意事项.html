<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="http://139.159.253.241:3000/stylesheets/github.css">
    <title>Document</title>
</head>
<body>
    <p>安装anaconda -&gt; Anaconda prompt -&gt; conda create  --name 虚拟环境名（比如 cu116torch113） python=版本</p>
<h2>检查GPU cuda可用</h2>
<p>进入环境 -&gt; 
python
import torch
print(torch.<strong>version</strong>)
print(torch.cuda.is_available())
print(torch.cuda.device_count())</p>
<p>conda activate 虚拟环境名
pip install (--user) <a href="https://pypi.tuna.tsinghua.edu.cn/simple">https://pypi.tuna.tsinghua.edu.cn/simple</a> 要安装的包</p>
<p>pip install  <a href="https://pypi.tuna.tsinghua.edu.cn/simple">https://pypi.tuna.tsinghua.edu.cn/simple</a>  opencv-python</p>
<p>pip install opencv-python -i <a href="http://pypi.douban.com/simple/">http://pypi.douban.com/simple/</a> --trusted-host pypi.douban.com</p>
<h2>手动安装torch</h2>
<p>手动去镜像下载的torch-1.13.1+cu116-cp38-cp38-win_amd64.whl文件</p>
<pre><code>CSDN:
https://link.csdn.net/?target=https%3A%2F%2Fdownload.pytorch.org%2Fwhl%2Ftorch_stable.html

https://download.pytorch.org/whl/torch_stable.html
</code></pre>
<h3>官网</h3>
<pre><code>https://download.pytorch.org/whl/torch/
</code></pre>
<p>在其中找到符合自己的那个文件。注意看清要下载的包的名字，torch还是其他啥。cuxxx一般是支持cuda的包。看好自己环境中的python处理器是什么版本的，不要下载错了，比如python3.6就是cp36。window,linux版本区分清楚。</p>
<p>******注意！！！一定要下载对应GPU版本的
先进入Anaconda prompt -&gt; 进入环境 -&gt; cd 对应虚拟环境地址，如 C:\Users\admin\anaconda3\envs\cu116torch113</p>
<p>在</p>
<pre><code>pip install --user torch-1.9.0+cu111-cp36-cp36m-linux_x86_64.whl
</code></pre>
<h2>创建、激活、退出环境</h2>
<p>（1）创建虚拟环境
    conda create -n env_name（环境名称） python=3.7(对应的python版本号）</p>
<p>（2）激活虚拟环境
    conda activate env_name（环境名称）</p>
<p>（3）退出虚拟环境
    deactivate env_name（环境名称）</p>
<p>（4）删除虚拟环境
    conda remove -n env_name(环境名称) --all</p>
<h2>查看已创建的虚拟环境</h2>
<p>conda env list  或 conda info -e  或  conda info --env</p>
<h2>临时切换通道举例：</h2>
<p>conda install pytorch torchvision -c <a href="https://mirrors6.tuna.tsinghua.edu.cn/anaconda/cloud/conda-forge/">https://mirrors6.tuna.tsinghua.edu.cn/anaconda/cloud/conda-forge/</a></p>
<h2>PIP</h2>
<h3>临时使用：</h3>
<p>pip install -i <a href="https://pypi.tuna.tsinghua.edu.cn/simple">https://pypi.tuna.tsinghua.edu.cn/simple</a> some-package</p>
<p>不行的话加参数--trusted-host pypi.tuna.tsinghua.edu.cn</p>
<h3>长期使用：</h3>
<p>pip config set global.index-url <a href="https://pypi.tuna.tsinghua.edu.cn/simple">https://pypi.tuna.tsinghua.edu.cn/simple</a></p>
<h3>国内pip镜像源：</h3>
<p>清华：<a href="https://pypi.tuna.tsinghua.edu.cn/simple">https://pypi.tuna.tsinghua.edu.cn/simple</a>
北外：<a href="https://mirrors.bfsu.edu.cn/pypi/web/simple">https://mirrors.bfsu.edu.cn/pypi/web/simple</a>
阿里云：<a href="https://mirrors.aliyun.com/pypi/simple/">https://mirrors.aliyun.com/pypi/simple/</a>
中国科技大学：<a href="https://pypi.mirrors.ustc.edu.cn/simple/">https://pypi.mirrors.ustc.edu.cn/simple/</a>
华中科技大学：<a href="http://pypi.hustunique.com/">http://pypi.hustunique.com/</a>
山东理工大学：<a href="http://pypi.sdutlinux.org/">http://pypi.sdutlinux.org/</a>
豆瓣：<a href="http://pypi.douban.com/simple/">http://pypi.douban.com/simple/</a></p>
<h2>修改某个虚拟环境的名字</h2>
<p>anaconda中没有重命名的命令，使用克隆删除的方法</p>
<h3>（1）进入旧环境</h3>
<p>conda activate old_name</p>
<h3>（2）克隆旧环境</h3>
<p>conda create -n new_name --clone old_name</p>
<h3>（3）退出旧环境</h3>
<p>conda deactivate</p>
<h3>（4）删除旧环境</h3>
<p>conda remove -n old_name --all</p>
<h2>查看conda的信息</h2>
<p>conda info</p>
<p>conda config --show-sources</p>
<h3>conda的环境管理</h3>
<p>​    conda list　　　　　　　　　　　　　　查看当前环境下已安装的包
​    conda list -n py27　　　　　　　　　 查看指定环境的已安装的包
​    conda search selenium　　　　　　　 查找package信息
​    conda install -n py27 selenium  指定环境安装package，不加-n则安装在当前活跃环境
​    conda update -n py27 selenium   指定环境更新package，不加-n则更新在当前活跃环境
​    conda remove -n py27 selenium   删除package，不加-n则删除在当前活跃环境
​    conda clean --all               清理（应该是pkgs文件下的）安装包缓存</p>
<h3>conda install -c 镜像源 包名</h3>
<p>conda install -c <a href="https://pypi.tuna.tsinghua.edu.cn/simple">https://pypi.tuna.tsinghua.edu.cn/simple</a> wandb</p>
<p>下载0.10.0版本的torchvision</p>
<pre><code>conda install torchvision=0.10.0 -c pytorch

conda install torchvision=0.10.0 -c https://mirrors.aliyun.com/pypi/simple/

conda install -c https://mirrors.aliyun.com/pypi/simple/ torchvision=0.10.0
</code></pre>
<h3>anaconda的包管理，类似Python的pip</h3>
<p>​    conda list　　　　　　　　　　　　　　查看当前环境下已安装的包
​    conda list -n py27　　　　　　　　　 查看指定环境的已安装的包
​    conda search selenium　　　　　　　 查找package信息
​    conda install -n py27 selenium  指定环境安装package，不加-n则安装在当前活跃环境
​    conda update -n py27 selenium   指定环境更新package，不加-n则更新在当前活跃环境
​    conda remove -n py27 selenium   删除package，不加-n则删除在当前活跃环境
​    conda clean --all               清理（应该是pkgs文件下的）安装包缓存</p>
<p>　　conda update conda  　 更新conda
　　conda update anaconda  更新anaconda
　　conda update python   更新python，假设当前环境是3.6，则更新3.6.x系列版本</p>
<ul>
<li>查看conda（pip）下各个包的版本：conda（pip） list</li>
<li>查看指定包版本（以matplotlib为例）： conda list matplotlib</li>
<li>查看python环境下能下载哪些版本的包（以matplotlib为例）：conda search xxx</li>
</ul>
<p><img src="typora-user-images.assets/image-20230419104334044.png" alt="image-20230419104334044"></p>
<h2>opencv</h2>
<pre><code>https://pypi.tuna.tsinghua.edu.cn/simple/opencv-python/

(DKD)pip install 

pip install -i http://pypi.douban.com/simple opencv-python --trusted-host pypi.douban.com
</code></pre>
<h3>清华镜像域名选择</h3>
<p><a href="https://mirrors.tuna.tsinghua.edu.cn">https://mirrors.tuna.tsinghua.edu.cn</a> 自动选择
<a href="https://mirrors6.tuna.tsinghua.edu.cn">https://mirrors6.tuna.tsinghua.edu.cn</a> 只解析 IPv6
<a href="https://mirrors4.tuna.tsinghua.edu.cn">https://mirrors4.tuna.tsinghua.edu.cn</a> 只解析 IPv4
北外镜像域名选择
<a href="https://mirrors.bfsu.edu.cn">https://mirrors.bfsu.edu.cn</a> 自动选择
<a href="https://mirrors6.bfsu.edu.cn">https://mirrors6.bfsu.edu.cn</a> 只解析 IPv6
<a href="https://mirrors4.bfsu.edu.cn">https://mirrors4.bfsu.edu.cn</a> 只解析 IPv4
中科大域名选择
mirrors.ustc.edu.cn 自动解析
ipv4.mirrors.ustc.edu.cn IPv4 线路
ipv6.mirrors.ustc.edu.cn IPv6 线路
cernet.mirrors.ustc.edu.cn 教育网线路
chinanet.mirrors.ustc.edu.cn 电信线路
unicom.mirrors.ustc.edu.cn 联通线路
cmcc.mirrors.ustc.edu.cn 移动线路
rsync.mirrors.ustc.edu.cn Rsync 线路</p>
<p>conda config --add channels <a href="https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/msys2/">https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/msys2/</a>
conda config --add channels <a href="https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/r/">https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/r/</a>
conda config --add channels <a href="https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/">https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/</a>
conda config --add channels <a href="https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main/">https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main/</a>
conda config --add channels <a href="https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/conda-forge/">https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/conda-forge/</a>
conda config --add channels <a href="https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/msys2/">https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/msys2/</a>
conda config --add channels <a href="https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/bioconda/">https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/bioconda/</a>
conda config --add channels <a href="https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/menpo/">https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/menpo/</a>
conda config --add channels <a href="https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/pytorch/">https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/pytorch/</a>
conda config --add channels <a href="https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/simpleitk/">https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/simpleitk/</a></p>
<p>要注意，conda config --add channels等价于conda config --prepend channels，
是在第一个channel前添加，即后添加的优先级高，优先在其中搜索。</p>
<h3>换回默认源的命令：</h3>
<p>conda config --remove-key channels</p>
<h2>pip install -r requirements.txt安装问题</h2>
<h3>将 Window 上的 Anaconda 虚拟环境迁移到 Linux 系统</h3>
<p>将 Window 上的 Anaconda 虚拟环境迁移到 Linux 系统需要以下步骤：</p>
<ol>
<li><p>在 Windows 系统中导出虚拟环境信息：打开 Anaconda Prompt 或命令提示符，激活要导出的虚拟环境，并执行以下命令导出环境信息到一个 YAML 文件中：</p>
<pre><code>conda env export &gt; environment.yml
</code></pre>
</li>
<li><p>将生成的 <code>environment.yml</code> 文件从 Windows 复制到 Linux 系统，可以使用 USB 驱动器、网络传输或其他适当的方法。</p>
</li>
<li><p>在 Linux 系统中安装 Anaconda 或 Miniconda：根据你的需求，在 Linux 系统上安装适合的 Anaconda 或 Miniconda。可以从 Anaconda 官方网站下载适用于 Linux 的安装程序，并按照官方文档的说明进行安装。</p>
</li>
<li><p>在 Linux 系统中创建新的虚拟环境：打开终端，在 Linux 上使用以下命令创建一个新的虚拟环境（假设环境名称为<code>myenv</code>）：</p>
<pre><code>conda create --name myenv
</code></pre>
</li>
<li><p>激活新的虚拟环境：执行以下命令来激活新创建的虚拟环境：</p>
<pre><code>conda activate myenv
</code></pre>
</li>
<li><p>在 Linux 系统中导入虚拟环境信息：在激活的虚拟环境下，执行以下命令来导入之前从 Windows 导出的环境信息：</p>
<pre><code>conda env update --file environment.yml
</code></pre>
<p>这将根据 <code>environment.yml</code> 文件中的环境信息安装所需的包和依赖项。</p>
</li>
</ol>
<p>完成上述步骤后，你应该已经成功将 Windows 上的 Anaconda 虚拟环境迁移到了 Linux 系统上的新虚拟环境中。可以使用 <code>conda list</code> 命令来验证安装的包和环境是否正确。请确保在 Linux 上安装了与 Windows 上相同的软件版本，以保证环境的一致性。</p>
<h4>conda env update --file environment.yml</h4>
<p><code>conda env update --file environment.yml</code> 命令在激活的虚拟环境下执行，它的作用是根据指定的 YAML 文件更新当前环境的软件包和依赖项。</p>
<p>具体而言，该命令会读取 <code>environment.yml</code> 文件中列出的软件包及其版本信息，并与当前环境中已安装的软件包进行比较。如果有任何软件包的版本不匹配或缺失，<code>conda</code> 会自动安装或升级软件包，以使当前环境与指定的 YAML 文件中描述的环境保持一致。</p>
<p>这个命令的执行过程包括以下几个步骤：</p>
<ol>
<li><p>读取 <code>environment.yml</code> 文件：<code>conda</code> 会解析指定的 YAML 文件，读取其中的软件包名称和版本信息。</p>
</li>
<li><p>检查环境中已安装的软件包：<code>conda</code> 会检查当前虚拟环境中已安装的软件包和其版本信息。</p>
</li>
<li><p>比较软件包版本：对比 <code>environment.yml</code> 文件中指定的软件包版本和当前环境中已安装的版本，确定是否需要进行更新。</p>
</li>
<li><p>安装或更新软件包：根据比较的结果，<code>conda</code> 会自动安装新的软件包或更新已有软件包的版本，以使当前环境与指定的 YAML 文件一致。</p>
</li>
</ol>
<p>通过执行 <code>conda env update --file environment.yml</code> 命令，你可以方便地在新的虚拟环境中重现与 <code>environment.yml</code> 文件中描述的相同的软件包和环境配置，确保环境的一致性和可重复性。</p>
<h3><strong>一、requirements.txt介绍：</strong></h3>
<p>1、python项目中必须包含一个 requirements.txt 文件，用于记录所有依赖包及其精确的版本号。以便新环境部署。</p>
<p>requirements.txt可以通过pip命令自动生成和安装。</p>
<p>2、Pycharm的<strong>Terminal端生成requirements.txt文件</strong>：<code>pip freeze &gt; requirements.txt</code></p>
<p>3、Pycharm<strong>Terminal安装requirements.txt依赖包：</strong><code>pip install -r requirements.txt</code></p>
<p>conda  install --yes --file requirements.txt</p>
<p><img src="pip%E5%AE%89%E8%A3%85pytorch%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9.assets/chat-shot%20(1).png" alt="chat-shot (1)"></p>
<h3><strong>二、安装问题：</strong></h3>
<p>1、在<a href="https://so.csdn.net/so/search?q=github&spm=1001.2101.3001.7020">github</a>下载项目，安装依赖项的时候发现，有的依赖项在镜像源中找不到规定版本导致安装终止。</p>
<p>解决办法：将requirements.txt中没有对应版本的依赖项删掉（已经安装完的不能删掉），然后继续使用<code>pip install -r requirements.txt</code>，最后再单独安装没有安装上的依赖项（pip install的后面不加版本号）：<code>pip install 依赖项</code></p>
<p>2、安装速度太慢：因为下载镜像源默认为国外<a href="https://pypi.org/simple%EF%BC%8C%E9%80%9F%E5%BA%A6%E8%BE%83%E6%85%A2">https://pypi.org/simple，速度较慢</a></p>
<p>解决办法：修改镜像源为国内，eg：<strong>清华/阿里云/豆瓣</strong>，以清华镜像为例</p>
<p>（1）临时修改：加参数-i和镜像地址 <code>pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple/</code></p>
<p>（2）永久修改：</p>
<p><strong>（a）linux</strong>：修改 ~/.pip/pip.conf (没有就创建一个)， 修改 index-url至tuna，内容如下：</p>
<pre><code>[global]
 index-url = https://pypi.tuna.tsinghua.edu.cn/simple
</code></pre>
<p>（2）永久修改：</p>
<p><strong>（a）linux</strong>：修改 ~/.pip/pip.conf (没有就创建一个)， 修改 index-url至tuna，内容如下：</p>
<pre><code>[global]
 index-url = https://pypi.tuna.tsinghua.edu.cn/simple
</code></pre>
<p>3、找到在requirements.txt目录下，按住shift键再右击鼠标，选择打开powershell窗口（终端），然后在给终端命令：<code>pip install -r requirements.txt</code>即可下载。
下载的时候，报错：No lssuch file or directory: ‘requirements.txt’</p>
<p>报错信息显示找不到对应的文件，有可能是文件名没写对（没错，真有可能是这个原因）
参考<a href="https://www.cnblogs.com/hailin2018/p/13495790.html">https://www.cnblogs.com/hailin2018/p/13495790.html</a></p>
<p>conda env create -n cu116torch113 -f cu116torch113.yml</p>
<h3>whl is not a supported wheel on this platform.</h3>
<p>输入<strong>pip debug --verbose命令</strong>查看平台支持的版本，结果如图<img src="https://img-blog.csdnimg.cn/5e13459e888541c5ad844d7efd6f8ac8.png" alt="img"> 				</p>
<p>对比我们的文件名，发现不在这个支持的版本列表里面，很简单，<strong>修改whl文件名</strong>即可，我修改后的文件名如下：<strong>torch-1.12.1+cu116-cp39-abi3-win_amd64.whl，<strong>其实对照上图中的任何一个的名称都可以，然后再用</strong>pip install</strong> <strong>torch-1.12.1+cu116-cp39-abi3-win_amd64.whl</strong> 安装，成功**。**</p>
<p>cp36-cp36m-manylinux_2_31_x86_64</p>
<pre><code>  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/msys2/
  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/conda-forge
  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/
</code></pre>

</body>
</html>